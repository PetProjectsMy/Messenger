@import "../helpers/common";
@import "../helpers/mixins-common";

@profile-page-height: 90vh;
// --------------------------
@header-section-flex: 25%;
@profile-header-height: @profile-page-height * (@header-section-flex / 100%);

@image-section-flex: 75%;
@image-max-height: @profile-header-height * (@image-section-flex / 100%);

@name-section-flex: 100% - @image-section-flex;
// --------------------------
@nav-section-flex: 20%;
@nav-section-height: @profile-page-height * (@nav-section-flex / 100%);
@footer-section-background-color: slategrey;

@main-section-flex: 100% - @header-section-flex - @nav-section-flex;
@main-section-height: @profile-page-height * (@main-section-flex / 100%);
@main-section-background-color: azure;

main.profile-page {
  height: @profile-page-height;

  &:extend(.centered-container);
  &:extend(.vertical-block);
  .mixin-width-by-device(0.9, 0.6, 600px);

  & > * {
    width: 100%;

    &:extend(.vertical-block);
  }

  .profile-form-header {
    // height: @profile-header-height;
    flex: @header-section-flex;
    background-color: @footer-section-background-color;

    .image-section {
      flex: @image-section-flex;

      &:extend(.vertical-block);

      img {
        @h: ~"min(90%, calc(0.9 * @{image-max-height}))";

        width: @h;
        height: @h;
        padding: calc(0.05 * @h);

        font-size: 1.5em;

        border-radius: 50%;
      }
    }

    .name-section {
      flex: @name-section-flex;

      &:extend(.vertical-block);

      .user-id {
        height: 80%;
        font-size: 2em;
        font-weight: 600;
      }
    }
  }

  form.profile-data-form fieldset {
    flex: @main-section-height;

    width: 100%;

    background-color: @main-section-background-color;
    border: none;

    &:extend(.vertical-block);

    .data-field {
      flex: 1;
      width: 100%;

      &:extend(.horizontal-block);

      & > * {
        flex: 1;

        width: 100%;
        height: 100%;

        font-size: 1.3em;

        &:extend(.vertical-block);
      }

      .data-type-section {
        .data-type {
          font-weight: 550;
        }
      }

      .data-input-section {
        .data-input {
          font-style: italic;
          text-align: center;
        }
      }
    }

    span[class$="_error"] {
      color: red;
      text-decoration: underline;
    }

    span.api-error {
      font-size: 1.2em;
      color: red;
      text-decoration: underline;
    }

    span.api-success {
      font-size: 1.2em;
      color: green;
      text-decoration: underline;
    }
  }

  .profile-nav-section {
    flex: @nav-section-flex;
    background-color: beige;

    &:extend(.horizontal-block);

    .data-change-section,
    .home-button-section,
    .avatar-change-section {
      flex: 1;
      height: 100%;

      &:extend(.vertical-block);

      & > * {
        flex: 1;
        width: 100%;

        &:extend(.vertical-block);
      }
    }

    section.avatar-change-section {
      form.avatar-change-form {
        width: 100%;
        height: 100%;

        &:extend(.vertical-block);

        .choose-button-section,
        .submit-button-section {
          flex: 1;
          width: 100%;

          &:extend(.vertical-block);
        }

        input.upload-avatar {
          display: none;
        }
      }
    }
  }
}
